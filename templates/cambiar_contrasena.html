<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cambiar Contraseña</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
      .form-container { max-width: 420px; background: white; padding: 24px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
      .form-group { margin-bottom:14px; }
      .form-group label { display:block; margin-bottom:6px; }
      .form-group input { width:100%; padding:8px; border-radius:6px; border:1px solid #e7e7e7; }
      .btn { padding:10px 14px; border-radius:6px; border:none; cursor:pointer; }
      .btn-primary { background:#667eea; color:#fff; }
      .btn-secondary { background:#e7e7e7; color:#333; }
    </style>
  </head>
  <body>
    <div class="bg-logo" aria-hidden="true"></div>
    <header class="topbar">
      <h1><img src="/static/mitie_logo.png" srcset="/static/mitie_logo@2x.png 2x" class="brand-logo" alt="Mitie" width="56" decoding="async">Cambiar Contraseña</h1>
      <div>
        <a class="history-link" href="/administracion">Atrás</a>
        &nbsp;|&nbsp;
        <a class="history-link" href="/logout">Cerrar Sesión</a>
      </div>
    </header>

    <main class="container" style="padding:24px;">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <script>window.server_messages = {{ messages | tojson }};</script>
        {% endif %}
      {% endwith %}

      <div class="form-container">
        <form method="post">
          <div class="form-group">
            <label for="current_password">Contraseña actual</label>
            <input id="current_password" name="current_password" type="password" required>
          </div>
          <div class="form-group">
            <label for="new_password">Nueva contraseña</label>
            <input id="new_password" name="new_password" type="password" required>
            <div style="font-size:12px;color:#888;margin-top:6px;">Mínimo 6 caracteres.</div>
          </div>
          <div class="form-group">
            <label for="confirm_password">Confirmar nueva contraseña</label>
            <input id="confirm_password" name="confirm_password" type="password" required>
          </div>
          <div style="display:flex;gap:10px;">
            <button type="submit" class="btn btn-primary">Cambiar contraseña</button>
            <a href="/administracion" class="btn btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;text-decoration:none;">Cancelar</a>
          </div>
        </form>
      </div>
    </main>
  </body>
</html>
