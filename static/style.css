:root{
  --brand-orange: #ff7a2f;
  --brand-magenta: #8e2a9e;
  --brand-gradient: linear-gradient(135deg,var(--brand-magenta),var(--brand-orange));
  --brand-dark: #3b1f3f;
  --brand-text: #4b4b4b;
  --accent: var(--brand-orange);
  --muted: #f7f7f7;
  --text: #111;
} 
*{box-sizing:border-box;font-family:Segoe UI, Roboto, Arial, sans-serif}
body{margin:0;background:var(--muted);color:var(--text)}
.topbar{background:var(--brand-gradient);padding:16px 20px;display:flex;align-items:center;justify-content:space-between;color:#fff}
.topbar h1{margin:0;font-size:18px;display:flex;align-items:center;gap:12px}
.brand-logo{width:56px;height:auto;display:inline-block;vertical-align:middle;margin-right:12px}
@media (max-width:600px){.brand-logo{width:40px}}
.history-link{color:rgba(255,255,255,0.95);text-decoration:none;font-weight:600}  
.container{display:flex;flex-direction:column;align-content:space-between;justify-content:center;align-items:flex-start;gap:20px;padding:24px;width:100%;margin:0;max-width:none;height:calc(100vh - 72px);box-sizing:border-box}
.card{background:#fff;padding:18px;border-radius:8px;flex:1;box-shadow:0 1px 6px rgba(0,0,0,0.06);display:flex;flex-direction:column;overflow:auto;}
.card h2{margin-top:0;color:#333}
.card.entrega{}
.card.entrega h2{color:#2e7d32}
.card.recepcion{}
.card.recepcion h2{color:#1565c0}
.btn.entrega{background:#4caf50;color:white}
.btn.entrega:hover{background:#45a049}
.btn.recepcion{background:#2196f3;color:white}
.btn.recepcion:hover{background:#0b7dda}
.card.incidencia{}
.card.incidencia h2{color:#c62828}
.btn.incidencia{background:#d32f2f;color:white}
.btn.incidencia:hover{background:#b71c1c}
.search-box{background:#fff;padding:18px;border-radius:8px;margin-bottom:20px;box-shadow:0 1px 4px rgba(0,0,0,0.04)}
.search-box h3{margin-top:0;color:#333}
.search-box label{display:inline-block;margin-right:20px}
.search-box input{padding:8px;border:1px solid #e7e7e7;border-radius:6px;width:200px}
.search-box > form button{padding:8px 16px;margin-left:10px;background:#4caf50;color:white;border:none;border-radius:6px;cursor:pointer}
.search-box > form button:hover{background:#45a049}
.search-box .dropdown-toggle{padding:8px 16px;background:transparent;border:none;color:#000;cursor:pointer;margin-left:20px}
.search-box .dropdown-toggle:hover{background:rgba(0,0,0,0.05)}
.search-box .dropdown-item{background:none !important;color:#000 !important}
.form label{display:block;margin:10px 0}
.form input{width:100%;padding:8px;border:1px solid #e7e7e7;border-radius:6px}
.input-error{border-color:#d9534f;background:rgba(217,83,79,0.03)}
.field-error-message{color:#d9534f;font-size:12px;margin-top:6px;margin-bottom:4px}
.actions{margin-top:14px}
.btn{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
.btn.primary{background:var(--accent);color:#111} 
.btn-secondary { background: #667eea; color: white; padding: 10px 16px; border: none; border-radius: 6px; text-decoration: none; cursor: pointer; display: inline-block; font-size: 14px; font-weight: 600; transition: background 0.3s; }
.btn-secondary:hover { background: #5568d3; color: white; }
.btn-small { padding: 6px 12px !important; font-size: 12px !important; }
.btn-danger { background: #d32f2f !important; color: white !important; }
.btn-danger:hover { background: #b71c1c !important; }
.btn-cancel { background: #6c757d; color: white; padding: 10px 16px; border: none; border-radius: 6px; text-decoration: none; cursor: pointer; display: inline-block; font-size: 14px; font-weight: 600; transition: background 0.3s; }
.btn-cancel:hover { background: #5a6268; color: white; }
.btn.secondary{background:#fff;border:1px solid #ddd}
table{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}
th,td{padding:10px;text-align:left;border-bottom:1px solid #f1f1f1}
thead th{background:var(--accent)}
th.sortable:hover{background:var(--accent);filter:brightness(1.15);transition:filter .15s}
th.sortable .sort-arrow{font-size:0.75em;opacity:0.85}
.history{height:100vh;display:flex;flex-direction:column;margin:0;padding:12px;max-width:none}
.history .search-box{margin-bottom:15px;flex-shrink:0}
.history table{flex:1;overflow-y:auto;display:block}
.history thead{display:table;width:100%;table-layout:fixed;background:var(--yellow)}
.history tbody{display:block;overflow-y:auto;height:calc(100vh - 250px)}
.history tr{display:table;width:100%;table-layout:fixed}
.history th, .history td{padding:10px;text-align:left;border-bottom:1px solid #f1f1f1;word-break:break-word}

@media (max-width:800px){.container{flex-direction:column;padding:12px;height:auto}.card{height:auto}}

/* Toast notifications */
#toast-container{position:fixed;top:20px;right:20px;z-index:1400;display:flex;flex-direction:column;gap:10px;pointer-events:none}
.toast{min-width:240px;max-width:360px;padding:12px 14px;border-radius:8px;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.12);pointer-events:auto;opacity:0;transform:translateY(-10px);transition:all .25s ease-in-out;font-weight:600}
.toast.show{opacity:1;transform:translateY(0)}
.toast.success{background:#28a745}
.toast.error{background:#d9534f}
.toast.info{background:#17a2b8}
.toast .close{float:right;color:rgba(255,255,255,0.9);background:transparent;border:0;font-size:14px;cursor:pointer;margin-left:8px}
.toast .message{display:block;margin-right:8px}

/* Dark mode styles */
body.dark{background:#0f1113;color:#e9edf0}
body.dark .topbar{background:#1f1f1f;color:#fff}
body.dark .topbar h1{color:#fff}
body.dark .history-link{color:inherit}
body.dark .container, body.dark .card, body.dark .search-box, body.dark table, body.dark .usuarios-table{background:#121416;color:#e9edf0}
body.dark .card{box-shadow:none}
body.dark table, body.dark th, body.dark td{border-color:#222}
body.dark .login-card{background:#161717;color:#e9edf0}
body.dark .btn.primary{background:var(--accent);color:#111} 
body.dark .btn.secondary{background:#222;color:#e9edf0;border-color:#333}
body.dark .toast{box-shadow:0 6px 18px rgba(0,0,0,0.5)}
body.dark .search-box .dropdown-toggle{color:#e9edf0}
body.dark .search-box .dropdown-toggle:hover{background:rgba(255,255,255,0.08)}

/* Ensure readable text and form controls in dark mode */
body.dark h1, body.dark h2, body.dark h3, body.dark h4, body.dark p, body.dark label, body.dark a, body.dark .history-link, body.dark .card h2, body.dark .login-card h2, body.dark .login-form label, body.dark .info, body.dark .rol-badge { color: #e9edf0; }
body.dark th, body.dark td { color: #e9edf0; }
body.dark input, body.dark textarea, body.dark select { background: #0f1213; color: #e9edf0; border: 1px solid #2b2b2b; }
body.dark input::placeholder, body.dark textarea::placeholder { color: #b5bcc2; }
body.dark .usuarios-table td { color: #e9edf0; }
body.dark .btn { color: inherit; }

/* Dark mode toggle button (floating) */
#dark-mode-toggle{position:fixed;bottom:18px;right:18px;z-index:2000;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.12);border:none;background:rgba(0,0,0,0.6);color:#fff;font-size:18px}
#dark-mode-toggle.light{background:var(--yellow);color:#111}
#dark-mode-toggle:focus{outline:2px solid rgba(0,0,0,0.15)}

/* Full-page translucent logo background */
.bg-logo { position: fixed; inset: 0; display: block; pointer-events: none; z-index: 0; }
.bg-logo::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url('/static/logo.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  opacity: 0.5;
}

/* Ensure header and main sit above the background logo */
.topbar { position: relative; z-index: 1200; }
main.container { position: relative; z-index: 2; }

/* Ensure login form sits above the background logo */
.login-outer { position: relative; z-index: 2; }
.login-card { position: relative; z-index: 3; }

/* Dropdown menu in header */
.nav-actions{display:flex;align-items:center}
.dropdown{position:relative}
.dropdown .btn.secondary{background:transparent;color:rgba(255,255,255,0.95);border:1px solid rgba(255,255,255,0.12);padding:8px 12px;border-radius:8px}
.dropdown .btn.secondary:hover{background:rgba(255,255,255,0.06)}
.dropdown-content{position:absolute;right:0;top:calc(100% + 8px);background:#fff;color:#222;min-width:200px;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.12);overflow:hidden;display:none;flex-direction:column;z-index:1300}
.dropdown.open .dropdown-content{display:flex}
.dropdown-content a{display:block;padding:10px 14px;text-decoration:none;color:inherit;border-bottom:1px solid #f1f1f1}
.dropdown-content a:last-child{border-bottom:none}
.dropdown-content a:hover{background:#f7f7f7}

/* Dark mode for dropdown */
body.dark .dropdown .btn.secondary{color:#e9edf0;border-color:rgba(255,255,255,0.06)}
body.dark .dropdown-content{background:#121416;color:#e9edf0;border:1px solid #222}
body.dark .dropdown-content a{border-bottom-color:#222}

/* User badge in header */
.user-badge{margin-left:16px;padding:6px 10px;background:rgba(255,255,255,0.12);color:#fff;border-radius:8px;font-weight:700;font-size:14px;text-decoration:none;display:inline-block;cursor:pointer}
body.dark .user-badge{background:rgba(255,255,255,0.06);color:#e9edf0}

/* Password preview toggle */
.password-wrapper{display:flex;align-items:center;gap:8px;width:100%}
.password-wrapper input{flex:1;width:100%;padding-right:8px}
.password-toggle{background:transparent;border:0;color:inherit;font-size:12px;cursor:pointer;padding:2px;width:20px;height:20px;display:inline-flex;align-items:center;justify-content:center;border-radius:4px;line-height:1}
.password-toggle:hover{background:rgba(0,0,0,0.04)}
.password-toggle:focus{outline:2px solid rgba(0,0,0,0.12)}
body.dark .password-toggle:hover{background:rgba(255,255,255,0.04)}
body.dark .password-toggle:focus{outline:2px solid rgba(255,255,255,0.12)}

/* Dropdown menu styles */
.dropdown-menu{position:relative;display:inline-block;margin-left:20px}
.dropdown-toggle{padding:8px 16px;background:transparent;border:none;border-radius:8px;cursor:pointer;color:#000;font-weight:600;font-size:14px;transition:background 0.2s ease}
.dropdown-toggle:hover{background:rgba(0,0,0,0.05)}
.dropdown-menu.open .dropdown-toggle{background:rgba(0,0,0,0.08)}
.dropdown-content{position:absolute;top:calc(100% + 8px);right:0;background:#fff;color:#222;min-width:200px;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.12);z-index:100;display:none;flex-direction:column;overflow:hidden;margin-top:0}
.dropdown-menu.open .dropdown-content{display:flex}
.dropdown-item{display:block;padding:10px 14px;color:inherit;text-decoration:none;transition:background 0.15s ease;border-bottom:1px solid #f1f1f1;width:100%;text-align:left;cursor:pointer;background:none;font-size:13px;font-weight:500;border:none}
.dropdown-item:last-child{border-bottom:none}
.dropdown-item:hover{background:#f7f7f7}
body.dark .dropdown-toggle{color:#e9edf0}
body.dark .dropdown-toggle:hover{background:rgba(255,255,255,0.08)}
body.dark .dropdown-menu.open .dropdown-toggle{background:rgba(255,255,255,0.12)}
body.dark .dropdown-content{background:#121416;color:#e9edf0;border:1px solid #222;box-shadow:0 8px 24px rgba(0,0,0,0.5)}
body.dark .dropdown-item{border-bottom-color:#222}
body.dark .dropdown-item:hover{background:#1f1f1f}

body.dark .dropdown-item{color:#e9edf0}
body.dark .dropdown-item:hover{background:#2b2b2b}

.table-container {
  width: auto;
  margin-left: -24px;
  margin-right: -24px;
  align-self: stretch;
  overflow-x: auto;
  background: #fff;
  border-radius: 0;
  box-shadow: 0 1px 6px rgba(0,0,0,0.06);
}

.header-actions, .admin-header {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  flex-wrap: nowrap;
  margin-bottom: 20px;
}

.header-actions > * {
  flex-shrink: 0;
}

.badge-success {
    background-color: #d4edda;
    color: #155724;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: bold;
    border: 1px solid #c3e6cb;
}

.badge-error {
    background-color: #f8d7da;
    color: #721c24;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: bold;
    border: 1px solid #f5c6cb;
}

@media (max-width:800px) {
  .table-container {
    margin-left: -12px;
    margin-right: -12px;
  }
}

body.dark .table-container {
  background: #121416;
  box-shadow: none;
}
